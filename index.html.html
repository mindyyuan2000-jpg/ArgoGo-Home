<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Argogo - ÊàëÁöÑÁßÅ‰∫∫Âä©Êâã</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <script>
   tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        fog: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        },
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    backgroundImage: {
                        'cloud-pattern': "url('https://picsum.photos/id/1015/1920/1080')",
                    }
                },
            }
        }
  </script>
  <style type="text/tailwindcss">
   @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .backdrop-blur-xs {
                backdrop-filter: blur(2px);
            }
            .text-shadow-sm {
                text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            }
            .bg-cloudy {
                background-color: rgba(248, 250, 252, 0.85);
                background-image: 
                    radial-gradient(circle at 10% 20%, rgba(224, 224, 224, 0.1) 0%, transparent 20%),
                    radial-gradient(circle at 90% 80%, rgba(224, 224, 224, 0.1) 0%, transparent 20%);
            }
            .glass-effect {
                background: rgba(255, 255, 255, 0.75);
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
                border: 1px solid rgba(255, 255, 255, 0.18);
                box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
            }
            .frosted-card {
                background: rgba(248, 250, 252, 0.85);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(226, 232, 240, 0.5);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
                border-radius: 12px;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* Êñ∞Â¢ûÂä®ÁîªÊïàÊûú */
            .hover-lift {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .hover-lift:hover {
                transform: translateY(-4px);
                box-shadow: 0 8px 40px rgba(0, 0, 0, 0.12);
                border-color: rgba(226, 232, 240, 0.8);
            }
            
            .interactive-button {
                transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
            }
            
            .interactive-button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                transition: left 0.5s;
            }
            
            .interactive-button:hover::before {
                left: 100%;
            }
            
            .interactive-button:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            }
            
            .interactive-button:active {
                transform: translateY(0);
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            
            .pulse-icon {
                animation: pulseGlow 2s infinite;
            }
            
            @keyframes pulseGlow {
                0%, 100% { 
                    opacity: 1;
                    transform: scale(1);
                }
                50% { 
                    opacity: 0.8;
                    transform: scale(1.05);
                }
            }
            
            .shimmer {
                background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
                background-size: 200% 100%;
                animation: shimmer 2s infinite;
            }
            
            @keyframes shimmer {
                0% { background-position: -200% 0; }
                100% { background-position: 200% 0; }
            }
            
            .float-animation {
                animation: float 3s ease-in-out infinite;
            }
            
            @keyframes float {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
            }
            
            .scale-on-hover {
                transition: transform 0.3s ease;
            }
            
            .scale-on-hover:hover {
                transform: scale(1.02);
            }
            
            .glow-on-hover {
                transition: all 0.3s ease;
            }
            
            .glow-on-hover:hover {
                box-shadow: 0 0 20px rgba(100, 116, 139, 0.3);
            }
            
            .slide-in {
                animation: slideIn 0.5s ease-out;
            }
            
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            .typing-animation::after {
                content: '|';
                animation: blink 1s infinite;
            }
            
            @keyframes blink {
                0%, 50% { opacity: 1; }
                51%, 100% { opacity: 0; }
            }
            
            .gradient-hover {
                background: linear-gradient(135deg, #64748b, #475569);
                transition: all 0.3s ease;
            }
            
            .gradient-hover:hover {
                background: linear-gradient(135deg, #475569, #334155);
                transform: translateY(-1px);
            }
        }
  </style>
</head>
<body class="min-h-screen bg-cloudy font-sans text-fog-800 overflow-x-hidden">
  <!-- ‰∫ëÂ±ÇÁ∫πÁêÜËÉåÊôØ -->
  <div class="fixed inset-0 bg-cloud-pattern bg-cover bg-center opacity-10 -z-10"></div>
  
  <div class="container mx-auto px-4 py-6 max-w-7xl">
   <!-- È°∂ÈÉ®Ê†áËØ≠ -->
   <div class="text-center mb-6 slide-in">
    <h1 class="text-[clamp(1.75rem,4vw,2.5rem)] font-light text-fog-700 tracking-wide typing-animation">
     ÂºÄÂêØÂÖÉÊ∞îÊª°Êª°ÁöÑ‰∏ÄÂ§©
    </h1>
   </div>
   
   <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
   <header class="frosted-card hover-lift mb-6 p-4 flex justify-between items-center">
    <div class="flex items-center space-x-3">
     <div class="w-10 h-10 rounded-full bg-gradient-to-br from-fog-400 to-fog-600 flex items-center justify-center text-white pulse-icon">
      <i class="fas fa-feather-alt text-xl"></i>
     </div>
     <h1 class="text-2xl font-light tracking-wide text-fog-700">
      Argogo
      <span class="font-medium text-fog-900">Âä©Êâã</span>
     </h1>
    </div>
    <div class="flex items-center space-x-4">
     <button class="p-2 rounded-full hover:bg-fog-100 transition-all duration-300 hover:scale-110 interactive-button">
      <i class="fas fa-cog text-fog-500"></i>
     </button>
     <button class="p-2 rounded-full hover:bg-fog-100 transition-all duration-300 hover:scale-110 interactive-button">
      <i class="fas fa-user-circle text-fog-500"></i>
     </button>
    </div>
   </header>
   
   <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
   <main class="flex flex-col md:flex-row gap-6">
    <!-- Â∑¶‰æß30%Âå∫Âüü -->
<<<<<<< HEAD
    <div class="w-full md:w-3/10 space-y-6">
     <!-- Â§©Ê∞îÂå∫Âüü -->
     <div class="frosted-card hover-lift glow-on-hover p-5">
      <div class="flex items-center justify-between mb-4">
       <h3 class="text-fog-600 text-sm font-medium flex items-center">
        <i class="fas fa-cloud mr-2 text-fog-400 pulse-icon"></i>
        ÂΩìÂâçÂ§©Ê∞î
       </h3>
       <span class="text-xs text-fog-400 shimmer" id="location">Ëé∑Âèñ‰ΩçÁΩÆ‰∏≠...</span>
      </div>
      <div class="flex items-center justify-center py-2">
       <div class="text-5xl mr-4 float-animation" id="weather-icon">
        <i class="fas fa-cloud text-fog-400"></i>
       </div>
       <div class="text-center">
        <div class="text-3xl font-light text-fog-800 scale-on-hover" id="temperature">--¬∞C</div>
        <div class="text-fog-500 text-sm mt-1" id="weather-desc">Âä†ËΩΩ‰∏≠</div>
       </div>
      </div>
      <!-- Âè§Â∏åËÖäÁ•ûËØùÊèêÁ§∫ -->
      <div class="mt-3 text-center">
       <div class="text-xs text-fog-500 italic transition-all duration-500" id="mythology-tip">
        üå§Ô∏è Á≠âÂæÖ‰ºóÁ•ûÁöÑÊ∂àÊÅØ...
       </div>
      </div>
     </div>
     
=======
    <div class="w-full md:w-3/10 space-y-6" data-ytextravalue="extra-acmjqxq07">
     <!-- Á©∫ÁôΩÂ∞èÊèí‰ª∂Âå∫Âüü -->
<!-- Â§©Ê∞îÂå∫Âüü -->
<div class="frosted-card p-5" data-ytindex="0" data-ytoriginindex="0">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-fog-600 text-sm font-medium flex items-center">
      <i class="fas fa-cloud mr-2 text-fog-400"></i>
      ÂΩìÂâçÂ§©Ê∞î
    </h3>
    <span class="text-xs text-fog-400" id="location">
      Ëé∑Âèñ‰ΩçÁΩÆ‰∏≠...
    </span>
  </div>
  <div class="flex items-center justify-center py-2">
    <div class="text-5xl mr-4" id="weather-icon">
      <i class="fas fa-cloud text-fog-400"></i>
    </div>
    <div class="text-center">
      <div class="text-3xl font-light text-fog-800" id="temperature">
        --¬∞C
      </div>
      <div class="text-fog-500 text-sm mt-1" id="weather-desc">
        Âä†ËΩΩ‰∏≠
      </div>
    </div>
  </div>
</div>

<script>
  // Á≠âÂæÖÈ°µÈù¢DOMÂä†ËΩΩÂÆåÊàê
  document.addEventListener('DOMContentLoaded', function() {
    // Ëé∑ÂèñÁî®Êà∑ÊâÄÂú®ÂüéÂ∏ÇÂ§©Ê∞îÔºàÂΩìÂâç‰ΩøÁî®Âõ∫ÂÆöÂùêÊ†áÔºåÂåó‰∫¨Ôºâ
    fetch('https://api.open-meteo.com/v1/forecast?latitude=39.9&longitude=116.4&current_weather=true')
      .then(response => response.json())
      .then(data => {
        const weather = data.current_weather;
        
        // Êõ¥Êñ∞‰ΩçÁΩÆ‰ø°ÊÅØÔºàËøôÈáå‰ΩøÁî®Âõ∫ÂÆö‰ΩçÁΩÆÔºåÂÆûÈôÖÂ∫îÁî®‰∏≠ÂèØ‰ª•ÈÄöËøáIPÊàñGPSËé∑ÂèñÔºâ
        document.getElementById('location').textContent = 'Âåó‰∫¨Â∏Ç';
        
        // Êõ¥Êñ∞Ê∏©Â∫¶
        document.getElementById('temperature').textContent = `${weather.temperature}¬∞C`;
        
        // Êõ¥Êñ∞Â§©Ê∞îÊèèËø∞
        document.getElementById('weather-desc').textContent = `È£éÈÄü: ${weather.windspeed}km/h`;
        
        // Ê†πÊçÆÂ§©Ê∞îÁä∂ÂÜµÊõ¥Êñ∞ÂõæÊ†áÔºàËøôÈáåÁÆÄÂçïÂ§ÑÁêÜÔºåÂÆûÈôÖÂèØ‰ª•Ê†πÊçÆÂ§©Ê∞î‰ª£Á†ÅËÆæÁΩÆ‰∏çÂêåÂõæÊ†áÔºâ
        const weatherIcon = document.querySelector('#weather-icon i');
        weatherIcon.className = 'fas fa-sun text-yellow-400'; // Á§∫‰æãÔºöËÆæÁΩÆ‰∏∫Â§™Èò≥ÂõæÊ†á
      })
      .catch(error => {
        console.error('Ëé∑ÂèñÂ§©Ê∞îÂ§±Ë¥•:', error);
        document.getElementById('weather-desc').textContent = 'Ëé∑ÂèñÂ§±Ë¥•';
      });
  });
</script>
>>>>>>> parent of 86793c3 (Update index.html.html)
     <!-- ÊîæÊùæÂ∞èÂ∑•ÂÖ∑ -->
     <div class="frosted-card hover-lift p-5 aspect-square flex flex-col items-center justify-center">
      <h3 class="text-fog-600 text-sm font-medium mb-4 flex items-center">
       <i class="fas fa-heart mr-2 text-fog-400 pulse-icon"></i>
       ÊîæÊùæÂ∞èÂ∑•ÂÖ∑
      </h3>
      <div class="w-full h-3/4 flex items-center justify-center bg-fog-50 rounded-lg mb-4 overflow-hidden scale-on-hover">
       <img alt="ÊîæÊùæÂ∞èÂ∑•ÂÖ∑" class="w-full h-full object-cover opacity-80 transition-opacity duration-300 hover:opacity-100" src="https://design.gemcoder.com/staticResource/echoAiSystemImages/94fb0dc4b2c30dc8dbcabc2298c91649.png"/>
      </div>
      <button class="w-full py-2 gradient-hover text-white rounded-lg text-sm interactive-button">
       <i class="fas fa-play-circle mr-1"></i>
       ÂºÄÂßãÊîæÊùæ
      </button>
     </div>
     
     <!-- ÂêçË®ÄÂå∫Âüü -->
     <div class="frosted-card hover-lift glow-on-hover p-6">
      <div class="flex flex-col items-center text-center">
       <i class="fas fa-quote-left text-4xl text-fog-200 mb-4 float-animation"></i>
       <blockquote class="text-fog-700 text-lg font-light max-w-md">
        Ë°åÂä®ÊòØÊÄùÊÉ≥ÁöÑÈîö
       </blockquote>
       <div class="w-16 h-px bg-fog-200 my-5"></div>
       <div class="flex items-center justify-between w-full">
        <button class="text-fog-500 hover:text-fog-700 transition-all duration-300 text-sm flex items-center interactive-button hover:scale-105">
         <i class="fas fa-refresh mr-1"></i>
         Êç¢‰∏ÄÂè•
        </button>
        <div class="text-fog-400 text-xs">ÊØèÊó•ÂêçË®Ä ¬∑ ÂêØÂèëÊÄùËÄÉ</div>
        <button class="text-fog-500 hover:text-fog-700 transition-all duration-300 text-sm flex items-center interactive-button hover:scale-105">
         <i class="fas fa-heart mr-1"></i>
         Êî∂Ëóè
        </button>
       </div>
      </div>
     </div>
    </div>
    
    <!-- Âè≥‰æß70%Âå∫Âüü -->
    <div class="w-full md:w-7/10 space-y-6">
     <!-- ÂæÖÂäû‰∫ãÈ°πÊ∏ÖÂçï -->
     <div class="frosted-card hover-lift p-5">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-fog-500 text-sm font-medium flex items-center">
        <i class="fas fa-check-circle mr-2 pulse-icon"></i>
        ÂæÖÂäû‰∫ãÈ°π
       </h2>
       <span class="text-xs bg-fog-100 text-fog-600 px-2 py-1 rounded-full transition-all duration-300 hover:bg-fog-200" id="task-count">0È°π</span>
      </div>
      <div class="space-y-3 max-h-64 overflow-y-auto pr-1" id="todo-list">
       <div class="text-center text-fog-400 text-sm py-8">
        <i class="fas fa-clipboard-list text-2xl mb-2 block float-animation"></i>
        ÊöÇÊó†ÂæÖÂäû‰∫ãÈ°π
       </div>
      </div>
      <div class="mt-4 flex">
       <input class="flex-1 px-3 py-2 rounded-l-lg border border-fog-200 focus:outline-none focus:ring-2 focus:ring-fog-400 focus:border-transparent text-sm bg-white/50 transition-all duration-300" id="new-task-input" placeholder="Ê∑ªÂä†Êñ∞‰ªªÂä°..." type="text"/>
       <button class="gradient-hover text-white px-3 rounded-r-lg interactive-button" id="add-task-btn">
        <i class="fas fa-plus"></i>
       </button>
      </div>
     </div>
     
     <!-- Âø´ÈÄüÁ¨îËÆ∞ -->
     <div class="frosted-card hover-lift p-5">
      <h2 class="text-fog-500 text-sm font-medium mb-4 flex items-center">
       <i class="fas fa-sticky-note mr-2 pulse-icon"></i>
       Âø´ÈÄüÁ¨îËÆ∞
      </h2>
      <textarea class="w-full h-40 p-3 bg-white/50 border border-fog-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-fog-400 focus:border-transparent resize-none transition-all duration-300 hover:bg-white/70" id="quick-note" placeholder="Âú®ËøôÈáåËÆ∞ÂΩï‰Ω†ÁöÑÊÉ≥Ê≥ï... ÂÜÖÂÆπ‰ºöËá™Âä®‰øùÂ≠ò" rows="5"></textarea>
      <div class="text-xs text-fog-400 mt-2 flex justify-between">
       <span>Ëá™Âä®‰øùÂ≠ò</span>
       <span id="save-status" class="transition-all duration-300">Â∑≤‰øùÂ≠ò</span>
      </div>
     </div>
     
     <!-- Á¶ÖÊÑèÂÄíËÆ°Êó∂ -->
     <div class="frosted-card hover-lift glow-on-hover p-5">
      <h2 class="text-fog-500 text-sm font-medium mb-4 flex items-center">
       <i class="fas fa-hourglass-half mr-2 pulse-icon"></i>
       ‰∏ìÊ≥®Êó∂Èó¥
      </h2>
      <div class="flex justify-center items-center py-4" id="focus-timer-container">
       <div class="text-center">
        <div class="text-5xl font-light text-fog-800 scale-on-hover" id="timer-minutes">45</div>
        <div class="text-fog-500 text-sm mt-1">ÂàÜÈíü</div>
       </div>
       <div class="mx-3 text-fog-300 text-3xl pulse-icon">:</div>
       <div class="text-center">
        <div class="text-5xl font-light text-fog-800 scale-on-hover" id="timer-seconds">00</div>
        <div class="text-fog-500 text-sm mt-1">Áßí</div>
       </div>
      </div>
      <div class="flex justify-center space-x-3 mt-4">
       <button class="px-4 py-2 gradient-hover text-white rounded-lg text-sm interactive-button" id="start-timer">
        <i class="fas fa-play mr-1"></i>ÂºÄÂßã
       </button>
       <button class="px-4 py-2 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" id="pause-timer">
        <i class="fas fa-pause mr-1"></i>ÊöÇÂÅú
       </button>
       <button class="px-4 py-2 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" id="reset-timer">
        <i class="fas fa-sync-alt mr-1"></i>ÈáçÁΩÆ
       </button>
      </div>
     </div>
     
     <!-- ËÆ°ÁÆóÂô®Âå∫Âüü -->
     <div class="frosted-card hover-lift p-5">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-fog-500 text-sm font-medium flex items-center">
        <i class="fas fa-calculator mr-2 pulse-icon"></i>
        ËÆ°ÁÆóÂô®
       </h2>
       <button class="text-fog-400 hover:text-fog-600 transition-all duration-300 hover:scale-110 interactive-button" id="toggle-calculator">
        <i class="fas fa-chevron-down transition-transform duration-300" id="calculator-icon"></i>
       </button>
      </div>
      <div id="calculator-content" class="transition-all duration-500 ease-in-out">
       <div class="mb-4 bg-white/50 rounded-lg p-3 hover:bg-white/70 transition-all duration-300">
        <input class="w-full text-right py-2 px-3 text-fog-800 text-lg bg-transparent border-none focus:outline-none" id="calculator-display" placeholder="0" readonly="" type="text"/>
       </div>
       <div class="grid grid-cols-4 gap-2">
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="7">7</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="8">8</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="9">9</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="/">√∑</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="4">4</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="5">5</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="6">6</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="*">√ó</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="1">1</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="2">2</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="3">3</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="-">-</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="0">0</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value=".">.</button>
        <button class="calc-btn py-3 bg-fog-300 hover:bg-fog-400 text-white rounded-lg text-sm interactive-button" data-value="=">=</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="+">+</button>
       </div>
       <button class="w-full mt-3 py-2 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" id="clear-calculator">
        <i class="fas fa-trash-alt mr-1"></i>Ê∏ÖÈô§
       </button>
      </div>
     </div>
    </div>
   </main>
   
   <!-- È°µËÑö -->
   <footer class="mt-10 text-center text-fog-400 text-xs py-4 slide-in">
    <p>Argogo ÁßÅ‰∫∫Âä©Êâã ¬© 2025 | Mindy Yuan</p>
   </footer>
  </div>

  /*
 * Argogo ‰øÆÂ§çÁâàËÑöÊú¨
 * Áõ¥Êé•Áî®Êú¨Êñá‰ª∂ÁöÑÂÜÖÂÆπÊõøÊç¢‰Ω†È°µÈù¢Â∫ïÈÉ®ÁöÑ <script>...</script> ÂÜÖÂÆπÂç≥ÂèØ„ÄÇ
 * ‰∏ªË¶Å‰øÆÂ§çÔºö
 * - Â§©Ê∞îÊ®°ÂùóÔºöÁä∂ÊÄÅÊõ¥Ê∏ÖÊô∞„ÄÅÈîôËØØÂ§ÑÁêÜ‰∏éÂõæÊ†á/ÊñáÊ°àÊò†Â∞ÑÔºõÂú∞ÁêÜ‰ΩçÁΩÆÂ§±Ë¥•Êó∂ÂõûÈÄÄÂà∞Âåó‰∫¨ÔºõÂπ∂ÂèëËØ∑Ê±ÇÂÆàÊä§„ÄÇ
 * - ÂæÖÂäûÔºöË°•ÈΩêÁº∫Â§±ÁöÑ addTask/render/storage/‰∫ã‰ª∂ÂßîÊâòÔºåÊîØÊåÅÂãæÈÄâ„ÄÅÂà†Èô§„ÄÅÂõûËΩ¶Ê∑ªÂä†„ÄÇ
 * - ËÆ°ÁÆóÂô®ÔºöÂÆåÂñÑ‰∫ã‰ª∂ÁªëÂÆö‰∏éË°®ËææÂºèÊ±ÇÂÄºÔºàÂÆâÂÖ®ÁôΩÂêçÂçïÔºâÔºåÂ¢ûÂä†ÊäòÂè†/Â±ïÂºÄ‰∏éÊ∏ÖÁ©∫„ÄÇ
 * - Âø´ÈÄüÁ¨îËÆ∞ÔºöÈò≤ÊäñËá™Âä®‰øùÂ≠ò‰∏éÁä∂ÊÄÅÊèêÁ§∫„ÄÇ
 * - ‰∏ìÊ≥®ËÆ°Êó∂ÔºöÂèØÂºÄÂßã/ÊöÇÂÅú/ÈáçÁΩÆÔºåÈÅøÂÖçÈáçÂ§çËÆ°Êó∂Âô®„ÄÇ
 */

// È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
document.addEventListener('DOMContentLoaded', () => {
  initWeather();
  initTodoList();
  initQuickNote();
  initFocusTimer();
  initCalculator();
  initAnimations();
});

/* ---------------- Â§©Ê∞î ---------------- */
function initWeather() {
  const els = {
    location: document.getElementById('location'),
    temp: document.getElementById('temperature'),
    desc: document.getElementById('weather-desc'),
    icon: document.getElementById('weather-icon'),
    myth: document.getElementById('mythology-tip')
  };

  // ÈªòËÆ§Âåó‰∫¨
  let lat = 39.9, lon = 116.4;
  let aborter = new AbortController();

  setLoading('Ëé∑Âèñ‰ΩçÁΩÆ‰∏≠‚Ä¶');

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        lat = pos.coords.latitude;
        lon = pos.coords.longitude;
        refresh();
      },
      _err => {
        els.location.textContent = 'Âåó‰∫¨';
        refresh();
      },
      { enableHighAccuracy: false, timeout: 8000 }
    );
  } else {
    els.location.textContent = 'Âåó‰∫¨';
    refresh();
  }

  function refresh() {
    aborter.abort();
    aborter = new AbortController();
    Promise.all([fetchWeather(aborter.signal), fetchCity(aborter.signal)])
      .catch(() => {/* Â∑≤ÊúâÂÖúÂ∫ï UI */});
  }

  function setLoading(text) {
    els.location.textContent = text || 'ÂÆö‰Ωç‰∏≠‚Ä¶';
    els.temp.textContent = '--¬∞C';
    els.desc.textContent = 'Âä†ËΩΩ‰∏≠‚Ä¶';
    els.icon.innerHTML = '<i class="fas fa-cloud text-fog-400"></i>';
    els.myth.textContent = 'üå§Ô∏è Á≠âÂæÖ‰ºóÁ•ûÁöÑÊ∂àÊÅØ‚Ä¶';
  }

  async function fetchWeather(signal) {
    try {
      const r = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`, { signal });
      const data = await r.json();
      const w = data.current_weather;
      if (!w) throw new Error('no current_weather');
      const temp = Math.round(w.temperature);
      els.temp.textContent = `${temp}¬∞C`;
      els.desc.textContent = `${codeToText(w.weathercode)} ¬∑ È£éÈÄü ${Math.round(w.windspeed)} km/h`;
      setWeatherIcon(w.weathercode);
      setMythologyTip(temp, w.weathercode);
    } catch (e) {
      els.desc.textContent = 'Â§©Ê∞îËé∑ÂèñÂ§±Ë¥•';
    }
  }

  async function fetchCity(signal) {
    try {
      const r = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`, { signal, headers: { 'Accept-Language': 'zh-CN' } });
      const data = await r.json();
      const addr = data.address || {};
      const city = addr.city || addr.town || addr.village || addr.state || 'Êú™Áü•ÂüéÂ∏Ç';
      els.location.textContent = city;
    } catch (e) {
      els.location.textContent = els.location.textContent || 'Êú™Áü•‰ΩçÁΩÆ';
    }
  }

  function setWeatherIcon(code) {
    els.icon.className = 'text-5xl mr-4 float-animation';
    let html;
    if (code === 0) html = '<i class="fas fa-sun text-yellow-400"></i>';
    else if (code <= 3) html = '<i class="fas fa-cloud text-fog-400"></i>';
    else if (code >= 51 && code <= 67) html = '<i class="fas fa-cloud-rain"></i>';
    else if (code >= 71 && code <= 77) html = '<i class="fas fa-snowflake"></i>';
    else if (code >= 80 && code <= 82) html = '<i class="fas fa-cloud-showers-heavy"></i>';
    else if (code >= 95) html = '<i class="fas fa-bolt text-yellow-500"></i>';
    else html = '<i class="fas fa-cloud"></i>';
    els.icon.innerHTML = html;
  }

  function codeToText(code) {
    const map = {
      0: 'Êô¥', 1: 'Â§ö‰∫ë', 2: 'Â±ÄÈÉ®Â§ö‰∫ë', 3: 'Èò¥', 45: 'Èõæ', 48: 'ÈõæÂáá',
      51: 'ÊØõÊØõÈõ®', 53: 'Â∞èÈõ®', 55: '‰∏≠Èõ®', 56: 'ÂÜªÊØõÊØõÈõ®', 57: 'ÂÜªÈõ®',
      61: 'Â∞èÈõ®', 63: '‰∏≠Èõ®', 65: 'Â§ßÈõ®', 66: 'ÂÜªÈõ®', 67: 'ÂÜªÂº∫Èõ®',
      71: 'Â∞èÈõ™', 73: '‰∏≠Èõ™', 75: 'Â§ßÈõ™', 77: 'ÂÜ∞Á≤í', 80: 'ÈòµÈõ®', 81: 'Âº∫ÈòµÈõ®', 82: 'Êö¥ÈòµÈõ®',
      85: 'Â∞èÈòµÈõ™', 86: 'Â§ßÈòµÈõ™', 95: 'Èõ∑ÈòµÈõ®', 96: 'Èõ∑ÈòµÈõ®Â§πÂÜ∞Èõπ', 97: 'Âº∫Èõ∑ÈòµÈõ®'
    };
    return map[code] || 'Â§©Ê∞î';
  }

  function setMythologyTip(temperature, weatherCode) {
    let tip = '';
    if (temperature >= 35) tip = 'üî• Ëµ´Ëè≤ÊñØÊâòÊñØÁöÑÁÜîÁÇâÊ≠£Âú®ÁáÉÁÉßÔºÅËÆ∞ÂæóÂ§öË°•Ê∞¥ÈôçÊ∏©';
    else if (temperature >= 30) tip = '‚òÄÔ∏è Ëµ´Âà©‰øÑÊñØÈ©æÁùÄÊàòËΩ¶È´òÊÇ¨Â§©Á©∫ÔºåÊ≥®ÊÑèÈò≤Êôí';
    else if (temperature >= 25) tip = 'üåû ÈòøÊ≥¢ÁΩóÁöÑÈáëÂºìÊï£ÂèëÁùÄÊ∏©ÊöñÂÖâËäí';
    else if (temperature >= 15) tip = 'üå∏ ÂæóÂ¢®ÂøíÂ∞îÁöÑÁ•ùÁ¶èÂ∏¶Êù•ÂÆú‰∫∫Ê∏©Â∫¶';
    else if (temperature >= 5) tip = 'üçÉ È£éÁ•û‰ª¨Ê≠£Âú®ËΩªÊüîÂú∞ÂêπÊãÇÂ§ßÂú∞';
    else if (temperature >= 0) tip = '‚ùÑÔ∏è ÂåóÈ£éÁ•ûÊ≥¢ÁëûÈòøÊñØÂ∏¶Êù•‰∫ÜÂØíÊÑè';
    else tip = 'üßä ÂØíÂÜ¨‰πãÁ•ûÊ≠£Âú®ËÄÉÈ™åÂá°‰∫∫ÁöÑÊÑèÂøó';

    if (weatherCode >= 80) tip = '‚ö° ÂÆôÊñØÊå•ËàûÁùÄÈõ∑Áîµ‰πãÁüõÔºÅËØ∑Ê≥®ÊÑèÂÆâÂÖ®';
    else if (weatherCode >= 70) tip = '‚ùÑÔ∏è ÂÜ¨Â≠£Â•≥Á•ûÁèÄËÄ≥Â°ûÁ¶èÊ∂ÖÂΩíÊù•‰∫Ü';
    else if (weatherCode >= 50) tip = 'üåßÔ∏è ÂÆôÊñØÊ≠£Âú®Èôç‰∏ãÁîòÈú≤ÔºåËÆ∞ÂæóÂ∏¶‰ºû';

    els.myth.style.opacity = '0';
    setTimeout(() => { els.myth.textContent = tip; els.myth.style.opacity = '1'; }, 200);
  }
}

/* ---------------- ÂæÖÂäû ---------------- */
function initTodoList() {
  const els = {
    list: document.getElementById('todo-list'),
    input: document.getElementById('new-task-input'),
    addBtn: document.getElementById('add-task-btn'),
    count: document.getElementById('task-count')
  };

  let tasks = load();
  render();

  els.addBtn.addEventListener('click', addTask);
  els.input.addEventListener('keypress', e => { if (e.key === 'Enter') addTask(); });
  els.list.addEventListener('click', onListClick);

  function addTask() {
    const text = els.input.value.trim();
    if (!text) return;
    tasks.push({ id: Date.now(), text, done: false });
    els.input.value = '';
    persist();
    render();
  }

  function onListClick(e) {
    const item = e.target.closest('[data-id]');
    if (!item) return;
    const id = Number(item.dataset.id);
    if (e.target.matches('input[type="checkbox"]')) {
      const t = tasks.find(t => t.id === id); if (t) t.done = e.target.checked; persist(); updateCount();
      item.querySelector('.task-text').classList.toggle('line-through', e.target.checked);
      item.querySelector('.task-text').classList.toggle('text-fog-400', e.target.checked);
    }
    if (e.target.matches('.btn-del, .btn-del *')) {
      tasks = tasks.filter(t => t.id !== id); persist(); render();
    }
  }

  function render() {
    els.list.innerHTML = '';
    if (!tasks.length) {
      els.list.innerHTML = `<div class="text-center text-fog-400 text-sm py-8">
        <i class="fas fa-clipboard-list text-2xl mb-2 block float-animation"></i>ÊöÇÊó†ÂæÖÂäû‰∫ãÈ°π
      </div>`;
      updateCount();
      return;
    }
    const frag = document.createDocumentFragment();
    tasks.forEach(t => {
      const div = document.createElement('div');
      div.dataset.id = t.id;
      div.className = 'flex items-center justify-between p-2 rounded hover:bg-fog-50';
      div.innerHTML = `
        <label class="flex items-center gap-2">
          <input type="checkbox" ${t.done ? 'checked' : ''} class="accent-fog-600">
          <span class="task-text ${t.done ? 'line-through text-fog-400' : ''}">${escapeHtml(t.text)}</span>
        </label>
        <button class="btn-del text-xs text-fog-400 hover:text-fog-700 px-2 py-1 rounded">
          <i class="fas fa-trash"></i>
        </button>
      `;
      frag.appendChild(div);
    });
    els.list.appendChild(frag);
    updateCount();
  }

  function updateCount() {
    els.count.textContent = `${tasks.length}È°π`;
  }

  function persist() { localStorage.setItem('argogo.tasks', JSON.stringify(tasks)); }
  function load() { try { return JSON.parse(localStorage.getItem('argogo.tasks')) || []; } catch { return []; } }
}

/* ---------------- Âø´ÈÄüÁ¨îËÆ∞ ---------------- */
function initQuickNote() {
  const ta = document.getElementById('quick-note');
  const status = document.getElementById('save-status');
  ta.value = localStorage.getItem('argogo.quicknote') || '';
  const save = debounce(() => {
    localStorage.setItem('argogo.quicknote', ta.value);
    status.textContent = 'Â∑≤‰øùÂ≠ò';
  }, 500);
  ta.addEventListener('input', () => { status.textContent = '‰øùÂ≠ò‰∏≠‚Ä¶'; save(); });
}

/* ---------------- ‰∏ìÊ≥®ËÆ°Êó∂ ---------------- */
function initFocusTimer() {
  const mEl = document.getElementById('timer-minutes');
  const sEl = document.getElementById('timer-seconds');
  const startBtn = document.getElementById('start-timer');
  const pauseBtn = document.getElementById('pause-timer');
  const resetBtn = document.getElementById('reset-timer');

  let total = 45 * 60; // ÈªòËÆ§ 45 ÂàÜÈíü
  let remain = total;
  let timer = null;

  function tick() {
    if (remain <= 0) { clearInterval(timer); timer = null; return; }
    remain -= 1; render();
  }

  function render() {
    const m = Math.floor(remain / 60);
    const s = remain % 60;
    mEl.textContent = String(m).padStart(2, '0');
    sEl.textContent = String(s).padStart(2, '0');
  }

  startBtn.addEventListener('click', () => {
    if (timer) return; // Èò≤ÈáçÂ§ç
    timer = setInterval(tick, 1000);
  });
  pauseBtn.addEventListener('click', () => { if (timer) { clearInterval(timer); timer = null; } });
  resetBtn.addEventListener('click', () => { remain = total; render(); });

  render();
}

/* ---------------- ËÆ°ÁÆóÂô® ---------------- */
function initCalculator() {
  const display = document.getElementById('calculator-display');
  const btns = document.querySelectorAll('.calc-btn');
  const clearBtn = document.getElementById('clear-calculator');
  const toggleBtn = document.getElementById('toggle-calculator');
  const content = document.getElementById('calculator-content');
  const icon = document.getElementById('calculator-icon');

  let expr = '';
  updateDisplay();

  btns.forEach(b => b.addEventListener('click', () => onKey(b.dataset.value)));
  clearBtn.addEventListener('click', () => { expr = ''; updateDisplay(); });
  toggleBtn.addEventListener('click', () => {
    const isHidden = content.style.maxHeight === '0px' || content.style.maxHeight === '0';
    if (isHidden) {
      content.style.maxHeight = content.scrollHeight + 'px';
      icon.style.transform = 'rotate(0deg)';
    } else {
      content.style.maxHeight = '0px';
      icon.style.transform = 'rotate(-90deg)';
    }
  });

  // ÂàùÂßãÂ±ïÂºÄÈ´òÂ∫¶
  requestAnimationFrame(() => { content.style.overflow = 'hidden'; content.style.maxHeight = content.scrollHeight + 'px'; });

  function onKey(v) {
    if (v === '=') return evaluate();
    // ÂêàÊ≥ïÂ≠óÁ¨¶ÔºöÊï∞Â≠ó„ÄÅÂ∞èÊï∞ÁÇπ„ÄÅËøêÁÆóÁ¨¶
    if (/^[0-9.+\-*/]$/.test(v)) {
      // Èò≤Ê≠¢ËøûÁª≠ËøêÁÆóÁ¨¶
      if (/^[+\-*/.]$/.test(v) && /^[+\-*/.]$/.test(expr.slice(-1))) {
        expr = expr.slice(0, -1) + v; // Ë¶ÜÁõñ‰∏ä‰∏Ä‰∏™
      } else {
        expr += v;
      }
      updateDisplay();
    }
  }

  function evaluate() {
    if (!expr) return;
    // ÁôΩÂêçÂçïÊ†°È™å
    if (!/^[-+*/.\d\s]+$/.test(expr)) { display.value = 'ÈîôËØØ'; return; }
    try {
      // eslint-disable-next-line no-new-func
      const result = Function(`return (${expr})`)();
      expr = String(Number.isFinite(result) ? result : '');
      updateDisplay();
    } catch (e) {
      display.value = 'ÈîôËØØ';
    }
  }

  function updateDisplay() { display.value = expr || '0'; }
}

/* ---------------- ËßÜËßâÂä®Áîª ---------------- */
function initAnimations() {
  // Âç°ÁâáËøõÂú∫
  const cards = document.querySelectorAll('.frosted-card');
  cards.forEach((card, i) => { card.style.animationDelay = `${i * 0.06}s`; card.classList.add('slide-in'); });

  // ËΩªÂæÆ 3D Ë∑üÈöè
  document.addEventListener('mousemove', e => {
    cards.forEach(card => {
      const r = card.getBoundingClientRect();
      const x = e.clientX - r.left, y = e.clientY - r.top;
      if (x < 0 || y < 0 || x > r.width || y > r.height) { card.style.transform = ''; return; }
      const cx = r.width / 2, cy = r.height / 2;
      const rx = (y - cy) / 16, ry = (cx - x) / 16;
      card.style.transform = `perspective(1000px) rotateX(${rx}deg) rotateY(${ry}deg) translateY(-4px)`;
    });
  });
}

/* ---------------- Â∞èÂ∑•ÂÖ∑ ---------------- */
function debounce(fn, wait) {
  let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(null, args), wait); };
}
function escapeHtml(s) { return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m])); }
