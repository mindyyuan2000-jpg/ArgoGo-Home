<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Argogo - æˆ‘çš„ç§äººåŠ©æ‰‹</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <script>
   tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        fog: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        },
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    backgroundImage: {
                        'cloud-pattern': "url('https://picsum.photos/id/1015/1920/1080')",
                    }
                },
            }
        }
  </script>
  <style type="text/tailwindcss">
   @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .backdrop-blur-xs {
                backdrop-filter: blur(2px);
            }
            .text-shadow-sm {
                text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            }
            .bg-cloudy {
                background-color: rgba(248, 250, 252, 0.85);
                background-image: 
                    radial-gradient(circle at 10% 20%, rgba(224, 224, 224, 0.1) 0%, transparent 20%),
                    radial-gradient(circle at 90% 80%, rgba(224, 224, 224, 0.1) 0%, transparent 20%);
            }
            .glass-effect {
                background: rgba(255, 255, 255, 0.75);
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
                border: 1px solid rgba(255, 255, 255, 0.18);
                box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
            }
            .frosted-card {
                background: rgba(248, 250, 252, 0.85);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(226, 232, 240, 0.5);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
                border-radius: 12px;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* æ–°å¢åŠ¨ç”»æ•ˆæœ */
            .hover-lift {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .hover-lift:hover {
                transform: translateY(-4px);
                box-shadow: 0 8px 40px rgba(0, 0, 0, 0.12);
                border-color: rgba(226, 232, 240, 0.8);
            }
            
            .interactive-button {
                transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
            }
            
            .interactive-button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                transition: left 0.5s;
            }
            
            .interactive-button:hover::before {
                left: 100%;
            }
            
            .interactive-button:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            }
            
            .interactive-button:active {
                transform: translateY(0);
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            
            .pulse-icon {
                animation: pulseGlow 2s infinite;
            }
            
            @keyframes pulseGlow {
                0%, 100% { 
                    opacity: 1;
                    transform: scale(1);
                }
                50% { 
                    opacity: 0.8;
                    transform: scale(1.05);
                }
            }
            
            .shimmer {
                background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
                background-size: 200% 100%;
                animation: shimmer 2s infinite;
            }
            
            @keyframes shimmer {
                0% { background-position: -200% 0; }
                100% { background-position: 200% 0; }
            }
            
            .float-animation {
                animation: float 3s ease-in-out infinite;
            }
            
            @keyframes float {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
            }
            
            .scale-on-hover {
                transition: transform 0.3s ease;
            }
            
            .scale-on-hover:hover {
                transform: scale(1.02);
            }
            
            .glow-on-hover {
                transition: all 0.3s ease;
            }
            
            .glow-on-hover:hover {
                box-shadow: 0 0 20px rgba(100, 116, 139, 0.3);
            }
            
            .slide-in {
                animation: slideIn 0.5s ease-out;
            }
            
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            .typing-animation::after {
                content: '|';
                animation: blink 1s infinite;
            }
            
            @keyframes blink {
                0%, 50% { opacity: 1; }
                51%, 100% { opacity: 0; }
            }
            
            .gradient-hover {
                background: linear-gradient(135deg, #64748b, #475569);
                transition: all 0.3s ease;
            }
            
            .gradient-hover:hover {
                background: linear-gradient(135deg, #475569, #334155);
                transform: translateY(-1px);
            }
        }
  </style>
</head>
<body class="min-h-screen bg-cloudy font-sans text-fog-800 overflow-x-hidden">
  <!-- äº‘å±‚çº¹ç†èƒŒæ™¯ -->
  <div class="fixed inset-0 bg-cloud-pattern bg-cover bg-center opacity-10 -z-10"></div>
  
  <div class="container mx-auto px-4 py-6 max-w-7xl">
   <!-- é¡¶éƒ¨æ ‡è¯­ -->
   <div class="text-center mb-6 slide-in">
    <h1 class="text-[clamp(1.75rem,4vw,2.5rem)] font-light text-fog-700 tracking-wide typing-animation">
     å¼€å¯å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©
    </h1>
   </div>
   
   <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
   <header class="frosted-card hover-lift mb-6 p-4 flex justify-between items-center">
    <div class="flex items-center space-x-3">
     <div class="w-10 h-10 rounded-full bg-gradient-to-br from-fog-400 to-fog-600 flex items-center justify-center text-white pulse-icon">
      <i class="fas fa-feather-alt text-xl"></i>
     </div>
     <h1 class="text-2xl font-light tracking-wide text-fog-700">
      Argogo
      <span class="font-medium text-fog-900">åŠ©æ‰‹</span>
     </h1>
    </div>
    <div class="flex items-center space-x-4">
     <button class="p-2 rounded-full hover:bg-fog-100 transition-all duration-300 hover:scale-110 interactive-button">
      <i class="fas fa-cog text-fog-500"></i>
     </button>
     <button class="p-2 rounded-full hover:bg-fog-100 transition-all duration-300 hover:scale-110 interactive-button">
      <i class="fas fa-user-circle text-fog-500"></i>
     </button>
    </div>
   </header>
   
   <!-- ä¸»å†…å®¹åŒº -->
   <main class="flex flex-col md:flex-row gap-6">
    <!-- å·¦ä¾§30%åŒºåŸŸ -->
<<<<<<< HEAD
    <div class="w-full md:w-3/10 space-y-6">
     <!-- å¤©æ°”åŒºåŸŸ -->
     <div class="frosted-card hover-lift glow-on-hover p-5">
      <div class="flex items-center justify-between mb-4">
       <h3 class="text-fog-600 text-sm font-medium flex items-center">
        <i class="fas fa-cloud mr-2 text-fog-400 pulse-icon"></i>
        å½“å‰å¤©æ°”
       </h3>
       <span class="text-xs text-fog-400 shimmer" id="location">è·å–ä½ç½®ä¸­...</span>
      </div>
      <div class="flex items-center justify-center py-2">
       <div class="text-5xl mr-4 float-animation" id="weather-icon">
        <i class="fas fa-cloud text-fog-400"></i>
       </div>
       <div class="text-center">
        <div class="text-3xl font-light text-fog-800 scale-on-hover" id="temperature">--Â°C</div>
        <div class="text-fog-500 text-sm mt-1" id="weather-desc">åŠ è½½ä¸­</div>
       </div>
      </div>
      <!-- å¤å¸Œè…Šç¥è¯æç¤º -->
      <div class="mt-3 text-center">
       <div class="text-xs text-fog-500 italic transition-all duration-500" id="mythology-tip">
        ğŸŒ¤ï¸ ç­‰å¾…ä¼—ç¥çš„æ¶ˆæ¯...
       </div>
      </div>
     </div>
     
=======
    <div class="w-full md:w-3/10 space-y-6" data-ytextravalue="extra-acmjqxq07">
     <!-- ç©ºç™½å°æ’ä»¶åŒºåŸŸ -->
<!-- å¤©æ°”åŒºåŸŸ -->
<div class="frosted-card p-5" data-ytindex="0" data-ytoriginindex="0">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-fog-600 text-sm font-medium flex items-center">
      <i class="fas fa-cloud mr-2 text-fog-400"></i>
      å½“å‰å¤©æ°”
    </h3>
    <span class="text-xs text-fog-400" id="location">
      è·å–ä½ç½®ä¸­...
    </span>
  </div>
  <div class="flex items-center justify-center py-2">
    <div class="text-5xl mr-4" id="weather-icon">
      <i class="fas fa-cloud text-fog-400"></i>
    </div>
    <div class="text-center">
      <div class="text-3xl font-light text-fog-800" id="temperature">
        --Â°C
      </div>
      <div class="text-fog-500 text-sm mt-1" id="weather-desc">
        åŠ è½½ä¸­
      </div>
    </div>
  </div>
</div>

<script>
  // ç­‰å¾…é¡µé¢DOMåŠ è½½å®Œæˆ
  document.addEventListener('DOMContentLoaded', function() {
    // è·å–ç”¨æˆ·æ‰€åœ¨åŸå¸‚å¤©æ°”ï¼ˆå½“å‰ä½¿ç”¨å›ºå®šåæ ‡ï¼ŒåŒ—äº¬ï¼‰
    fetch('https://api.open-meteo.com/v1/forecast?latitude=39.9&longitude=116.4&current_weather=true')
      .then(response => response.json())
      .then(data => {
        const weather = data.current_weather;
        
        // æ›´æ–°ä½ç½®ä¿¡æ¯ï¼ˆè¿™é‡Œä½¿ç”¨å›ºå®šä½ç½®ï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥é€šè¿‡IPæˆ–GPSè·å–ï¼‰
        document.getElementById('location').textContent = 'åŒ—äº¬å¸‚';
        
        // æ›´æ–°æ¸©åº¦
        document.getElementById('temperature').textContent = `${weather.temperature}Â°C`;
        
        // æ›´æ–°å¤©æ°”æè¿°
        document.getElementById('weather-desc').textContent = `é£é€Ÿ: ${weather.windspeed}km/h`;
        
        // æ ¹æ®å¤©æ°”çŠ¶å†µæ›´æ–°å›¾æ ‡ï¼ˆè¿™é‡Œç®€å•å¤„ç†ï¼Œå®é™…å¯ä»¥æ ¹æ®å¤©æ°”ä»£ç è®¾ç½®ä¸åŒå›¾æ ‡ï¼‰
        const weatherIcon = document.querySelector('#weather-icon i');
        weatherIcon.className = 'fas fa-sun text-yellow-400'; // ç¤ºä¾‹ï¼šè®¾ç½®ä¸ºå¤ªé˜³å›¾æ ‡
      })
      .catch(error => {
        console.error('è·å–å¤©æ°”å¤±è´¥:', error);
        document.getElementById('weather-desc').textContent = 'è·å–å¤±è´¥';
      });
  });
</script>
>>>>>>> parent of 86793c3 (Update index.html.html)
     <!-- æ”¾æ¾å°å·¥å…· -->
     <div class="frosted-card hover-lift p-5 aspect-square flex flex-col items-center justify-center">
      <h3 class="text-fog-600 text-sm font-medium mb-4 flex items-center">
       <i class="fas fa-heart mr-2 text-fog-400 pulse-icon"></i>
       æ”¾æ¾å°å·¥å…·
      </h3>
      <div class="w-full h-3/4 flex items-center justify-center bg-fog-50 rounded-lg mb-4 overflow-hidden scale-on-hover">
       <img alt="æ”¾æ¾å°å·¥å…·" class="w-full h-full object-cover opacity-80 transition-opacity duration-300 hover:opacity-100" src="https://design.gemcoder.com/staticResource/echoAiSystemImages/94fb0dc4b2c30dc8dbcabc2298c91649.png"/>
      </div>
      <button class="w-full py-2 gradient-hover text-white rounded-lg text-sm interactive-button">
       <i class="fas fa-play-circle mr-1"></i>
       å¼€å§‹æ”¾æ¾
      </button>
     </div>
     
     <!-- åè¨€åŒºåŸŸ -->
     <div class="frosted-card hover-lift glow-on-hover p-6">
      <div class="flex flex-col items-center text-center">
       <i class="fas fa-quote-left text-4xl text-fog-200 mb-4 float-animation"></i>
       <blockquote class="text-fog-700 text-lg font-light max-w-md">
        è¡ŒåŠ¨æ˜¯æ€æƒ³çš„é”š
       </blockquote>
       <div class="w-16 h-px bg-fog-200 my-5"></div>
       <div class="flex items-center justify-between w-full">
        <button class="text-fog-500 hover:text-fog-700 transition-all duration-300 text-sm flex items-center interactive-button hover:scale-105">
         <i class="fas fa-refresh mr-1"></i>
         æ¢ä¸€å¥
        </button>
        <div class="text-fog-400 text-xs">æ¯æ—¥åè¨€ Â· å¯å‘æ€è€ƒ</div>
        <button class="text-fog-500 hover:text-fog-700 transition-all duration-300 text-sm flex items-center interactive-button hover:scale-105">
         <i class="fas fa-heart mr-1"></i>
         æ”¶è—
        </button>
       </div>
      </div>
     </div>
    </div>
    
    <!-- å³ä¾§70%åŒºåŸŸ -->
    <div class="w-full md:w-7/10 space-y-6">
     <!-- å¾…åŠäº‹é¡¹æ¸…å• -->
     <div class="frosted-card hover-lift p-5">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-fog-500 text-sm font-medium flex items-center">
        <i class="fas fa-check-circle mr-2 pulse-icon"></i>
        å¾…åŠäº‹é¡¹
       </h2>
       <span class="text-xs bg-fog-100 text-fog-600 px-2 py-1 rounded-full transition-all duration-300 hover:bg-fog-200" id="task-count">0é¡¹</span>
      </div>
      <div class="space-y-3 max-h-64 overflow-y-auto pr-1" id="todo-list">
       <div class="text-center text-fog-400 text-sm py-8">
        <i class="fas fa-clipboard-list text-2xl mb-2 block float-animation"></i>
        æš‚æ— å¾…åŠäº‹é¡¹
       </div>
      </div>
      <div class="mt-4 flex">
       <input class="flex-1 px-3 py-2 rounded-l-lg border border-fog-200 focus:outline-none focus:ring-2 focus:ring-fog-400 focus:border-transparent text-sm bg-white/50 transition-all duration-300" id="new-task-input" placeholder="æ·»åŠ æ–°ä»»åŠ¡..." type="text"/>
       <button class="gradient-hover text-white px-3 rounded-r-lg interactive-button" id="add-task-btn">
        <i class="fas fa-plus"></i>
       </button>
      </div>
     </div>
     
     <!-- å¿«é€Ÿç¬”è®° -->
     <div class="frosted-card hover-lift p-5">
      <h2 class="text-fog-500 text-sm font-medium mb-4 flex items-center">
       <i class="fas fa-sticky-note mr-2 pulse-icon"></i>
       å¿«é€Ÿç¬”è®°
      </h2>
      <textarea class="w-full h-40 p-3 bg-white/50 border border-fog-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-fog-400 focus:border-transparent resize-none transition-all duration-300 hover:bg-white/70" id="quick-note" placeholder="åœ¨è¿™é‡Œè®°å½•ä½ çš„æƒ³æ³•... å†…å®¹ä¼šè‡ªåŠ¨ä¿å­˜" rows="5"></textarea>
      <div class="text-xs text-fog-400 mt-2 flex justify-between">
       <span>è‡ªåŠ¨ä¿å­˜</span>
       <span id="save-status" class="transition-all duration-300">å·²ä¿å­˜</span>
      </div>
     </div>
     
     <!-- ç¦…æ„å€’è®¡æ—¶ -->
     <div class="frosted-card hover-lift glow-on-hover p-5">
      <h2 class="text-fog-500 text-sm font-medium mb-4 flex items-center">
       <i class="fas fa-hourglass-half mr-2 pulse-icon"></i>
       ä¸“æ³¨æ—¶é—´
      </h2>
      <div class="flex justify-center items-center py-4" id="focus-timer-container">
       <div class="text-center">
        <div class="text-5xl font-light text-fog-800 scale-on-hover" id="timer-minutes">45</div>
        <div class="text-fog-500 text-sm mt-1">åˆ†é’Ÿ</div>
       </div>
       <div class="mx-3 text-fog-300 text-3xl pulse-icon">:</div>
       <div class="text-center">
        <div class="text-5xl font-light text-fog-800 scale-on-hover" id="timer-seconds">00</div>
        <div class="text-fog-500 text-sm mt-1">ç§’</div>
       </div>
      </div>
      <div class="flex justify-center space-x-3 mt-4">
       <button class="px-4 py-2 gradient-hover text-white rounded-lg text-sm interactive-button" id="start-timer">
        <i class="fas fa-play mr-1"></i>å¼€å§‹
       </button>
       <button class="px-4 py-2 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" id="pause-timer">
        <i class="fas fa-pause mr-1"></i>æš‚åœ
       </button>
       <button class="px-4 py-2 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" id="reset-timer">
        <i class="fas fa-sync-alt mr-1"></i>é‡ç½®
       </button>
      </div>
     </div>
     
     <!-- è®¡ç®—å™¨åŒºåŸŸ -->
     <div class="frosted-card hover-lift p-5">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-fog-500 text-sm font-medium flex items-center">
        <i class="fas fa-calculator mr-2 pulse-icon"></i>
        è®¡ç®—å™¨
       </h2>
       <button class="text-fog-400 hover:text-fog-600 transition-all duration-300 hover:scale-110 interactive-button" id="toggle-calculator">
        <i class="fas fa-chevron-down transition-transform duration-300" id="calculator-icon"></i>
       </button>
      </div>
      <div id="calculator-content" class="transition-all duration-500 ease-in-out">
       <div class="mb-4 bg-white/50 rounded-lg p-3 hover:bg-white/70 transition-all duration-300">
        <input class="w-full text-right py-2 px-3 text-fog-800 text-lg bg-transparent border-none focus:outline-none" id="calculator-display" placeholder="0" readonly="" type="text"/>
       </div>
       <div class="grid grid-cols-4 gap-2">
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="7">7</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="8">8</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="9">9</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="/">Ã·</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="4">4</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="5">5</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="6">6</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="*">Ã—</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="1">1</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="2">2</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="3">3</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="-">-</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value="0">0</button>
        <button class="calc-btn py-3 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" data-value=".">.</button>
        <button class="calc-btn py-3 bg-fog-300 hover:bg-fog-400 text-white rounded-lg text-sm interactive-button" data-value="=">=</button>
        <button class="calc-btn py-3 bg-fog-200 hover:bg-fog-300 text-fog-700 rounded-lg text-sm interactive-button" data-value="+">+</button>
       </div>
       <button class="w-full mt-3 py-2 bg-fog-100 hover:bg-fog-200 text-fog-700 rounded-lg text-sm interactive-button" id="clear-calculator">
        <i class="fas fa-trash-alt mr-1"></i>æ¸…é™¤
       </button>
      </div>
     </div>
    </div>
   </main>
   
   <!-- é¡µè„š -->
   <footer class="mt-10 text-center text-fog-400 text-xs py-4 slide-in">
    <p>Argogo ç§äººåŠ©æ‰‹ Â© 2025 | Mindy Yuan</p>
   </footer>
  </div>

  /*
 * Argogo ä¿®å¤ç‰ˆè„šæœ¬
 * ç›´æ¥ç”¨æœ¬æ–‡ä»¶çš„å†…å®¹æ›¿æ¢ä½ é¡µé¢åº•éƒ¨çš„ <script>...</script> å†…å®¹å³å¯ã€‚
 * ä¸»è¦ä¿®å¤ï¼š
 * - å¤©æ°”æ¨¡å—ï¼šçŠ¶æ€æ›´æ¸…æ™°ã€é”™è¯¯å¤„ç†ä¸å›¾æ ‡/æ–‡æ¡ˆæ˜ å°„ï¼›åœ°ç†ä½ç½®å¤±è´¥æ—¶å›é€€åˆ°åŒ—äº¬ï¼›å¹¶å‘è¯·æ±‚å®ˆæŠ¤ã€‚
 * - å¾…åŠï¼šè¡¥é½ç¼ºå¤±çš„ addTask/render/storage/äº‹ä»¶å§”æ‰˜ï¼Œæ”¯æŒå‹¾é€‰ã€åˆ é™¤ã€å›è½¦æ·»åŠ ã€‚
 * - è®¡ç®—å™¨ï¼šå®Œå–„äº‹ä»¶ç»‘å®šä¸è¡¨è¾¾å¼æ±‚å€¼ï¼ˆå®‰å…¨ç™½åå•ï¼‰ï¼Œå¢åŠ æŠ˜å /å±•å¼€ä¸æ¸…ç©ºã€‚
 * - å¿«é€Ÿç¬”è®°ï¼šé˜²æŠ–è‡ªåŠ¨ä¿å­˜ä¸çŠ¶æ€æç¤ºã€‚
 * - ä¸“æ³¨è®¡æ—¶ï¼šå¯å¼€å§‹/æš‚åœ/é‡ç½®ï¼Œé¿å…é‡å¤è®¡æ—¶å™¨ã€‚
 */

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', () => {
  initWeather();
  initTodoList();
  initQuickNote();
  initFocusTimer();
  initCalculator();
  initAnimations();
});

/* ---------------- å¤©æ°” ---------------- */
function initWeather() {
  const els = {
    location: document.getElementById('location'),
    temp: document.getElementById('temperature'),
    desc: document.getElementById('weather-desc'),
    icon: document.getElementById('weather-icon'),
    myth: document.getElementById('mythology-tip')
  };

  // é»˜è®¤åŒ—äº¬
  let lat = 39.9, lon = 116.4;
  let aborter = new AbortController();

  setLoading('è·å–ä½ç½®ä¸­â€¦');

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        lat = pos.coords.latitude;
        lon = pos.coords.longitude;
        refresh();
      },
      _err => {
        els.location.textContent = 'åŒ—äº¬';
        refresh();
      },
      { enableHighAccuracy: false, timeout: 8000 }
    );
  } else {
    els.location.textContent = 'åŒ—äº¬';
    refresh();
  }

  function refresh() {
    aborter.abort();
    aborter = new AbortController();
    Promise.all([fetchWeather(aborter.signal), fetchCity(aborter.signal)])
      .catch(() => {/* å·²æœ‰å…œåº• UI */});
  }

  function setLoading(text) {
    els.location.textContent = text || 'å®šä½ä¸­â€¦';
    els.temp.textContent = '--Â°C';
    els.desc.textContent = 'åŠ è½½ä¸­â€¦';
    els.icon.innerHTML = '<i class="fas fa-cloud text-fog-400"></i>';
    els.myth.textContent = 'ğŸŒ¤ï¸ ç­‰å¾…ä¼—ç¥çš„æ¶ˆæ¯â€¦';
  }

  async function fetchWeather(signal) {
    try {
      const r = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`, { signal });
      const data = await r.json();
      const w = data.current_weather;
      if (!w) throw new Error('no current_weather');
      const temp = Math.round(w.temperature);
      els.temp.textContent = `${temp}Â°C`;
      els.desc.textContent = `${codeToText(w.weathercode)} Â· é£é€Ÿ ${Math.round(w.windspeed)} km/h`;
      setWeatherIcon(w.weathercode);
      setMythologyTip(temp, w.weathercode);
    } catch (e) {
      els.desc.textContent = 'å¤©æ°”è·å–å¤±è´¥';
    }
  }

  async function fetchCity(signal) {
    try {
      const r = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`, { signal, headers: { 'Accept-Language': 'zh-CN' } });
      const data = await r.json();
      const addr = data.address || {};
      const city = addr.city || addr.town || addr.village || addr.state || 'æœªçŸ¥åŸå¸‚';
      els.location.textContent = city;
    } catch (e) {
      els.location.textContent = els.location.textContent || 'æœªçŸ¥ä½ç½®';
    }
  }

  function setWeatherIcon(code) {
    els.icon.className = 'text-5xl mr-4 float-animation';
    let html;
    if (code === 0) html = '<i class="fas fa-sun text-yellow-400"></i>';
    else if (code <= 3) html = '<i class="fas fa-cloud text-fog-400"></i>';
    else if (code >= 51 && code <= 67) html = '<i class="fas fa-cloud-rain"></i>';
    else if (code >= 71 && code <= 77) html = '<i class="fas fa-snowflake"></i>';
    else if (code >= 80 && code <= 82) html = '<i class="fas fa-cloud-showers-heavy"></i>';
    else if (code >= 95) html = '<i class="fas fa-bolt text-yellow-500"></i>';
    else html = '<i class="fas fa-cloud"></i>';
    els.icon.innerHTML = html;
  }

  function codeToText(code) {
    const map = {
      0: 'æ™´', 1: 'å¤šäº‘', 2: 'å±€éƒ¨å¤šäº‘', 3: 'é˜´', 45: 'é›¾', 48: 'é›¾å‡‡',
      51: 'æ¯›æ¯›é›¨', 53: 'å°é›¨', 55: 'ä¸­é›¨', 56: 'å†»æ¯›æ¯›é›¨', 57: 'å†»é›¨',
      61: 'å°é›¨', 63: 'ä¸­é›¨', 65: 'å¤§é›¨', 66: 'å†»é›¨', 67: 'å†»å¼ºé›¨',
      71: 'å°é›ª', 73: 'ä¸­é›ª', 75: 'å¤§é›ª', 77: 'å†°ç²’', 80: 'é˜µé›¨', 81: 'å¼ºé˜µé›¨', 82: 'æš´é˜µé›¨',
      85: 'å°é˜µé›ª', 86: 'å¤§é˜µé›ª', 95: 'é›·é˜µé›¨', 96: 'é›·é˜µé›¨å¤¹å†°é›¹', 97: 'å¼ºé›·é˜µé›¨'
    };
    return map[code] || 'å¤©æ°”';
  }

  function setMythologyTip(temperature, weatherCode) {
    let tip = '';
    if (temperature >= 35) tip = 'ğŸ”¥ èµ«è²æ–¯æ‰˜æ–¯çš„ç†”ç‚‰æ­£åœ¨ç‡ƒçƒ§ï¼è®°å¾—å¤šè¡¥æ°´é™æ¸©';
    else if (temperature >= 30) tip = 'â˜€ï¸ èµ«åˆ©ä¿„æ–¯é©¾ç€æˆ˜è½¦é«˜æ‚¬å¤©ç©ºï¼Œæ³¨æ„é˜²æ™’';
    else if (temperature >= 25) tip = 'ğŸŒ é˜¿æ³¢ç½—çš„é‡‘å¼“æ•£å‘ç€æ¸©æš–å…‰èŠ’';
    else if (temperature >= 15) tip = 'ğŸŒ¸ å¾—å¢¨å¿’å°”çš„ç¥ç¦å¸¦æ¥å®œäººæ¸©åº¦';
    else if (temperature >= 5) tip = 'ğŸƒ é£ç¥ä»¬æ­£åœ¨è½»æŸ”åœ°å¹æ‹‚å¤§åœ°';
    else if (temperature >= 0) tip = 'â„ï¸ åŒ—é£ç¥æ³¢ç‘é˜¿æ–¯å¸¦æ¥äº†å¯’æ„';
    else tip = 'ğŸ§Š å¯’å†¬ä¹‹ç¥æ­£åœ¨è€ƒéªŒå‡¡äººçš„æ„å¿—';

    if (weatherCode >= 80) tip = 'âš¡ å®™æ–¯æŒ¥èˆç€é›·ç”µä¹‹çŸ›ï¼è¯·æ³¨æ„å®‰å…¨';
    else if (weatherCode >= 70) tip = 'â„ï¸ å†¬å­£å¥³ç¥ç€è€³å¡ç¦æ¶…å½’æ¥äº†';
    else if (weatherCode >= 50) tip = 'ğŸŒ§ï¸ å®™æ–¯æ­£åœ¨é™ä¸‹ç”˜éœ²ï¼Œè®°å¾—å¸¦ä¼';

    els.myth.style.opacity = '0';
    setTimeout(() => { els.myth.textContent = tip; els.myth.style.opacity = '1'; }, 200);
  }
}

/* ---------------- å¾…åŠ ---------------- */
function initTodoList() {
  const els = {
    list: document.getElementById('todo-list'),
    input: document.getElementById('new-task-input'),
    addBtn: document.getElementById('add-task-btn'),
    count: document.getElementById('task-count')
  };

  let tasks = load();
  render();

  els.addBtn.addEventListener('click', addTask);
  els.input.addEventListener('keypress', e => { if (e.key === 'Enter') addTask(); });
  els.list.addEventListener('click', onListClick);

  function addTask() {
    const text = els.input.value.trim();
    if (!text) return;
    tasks.push({ id: Date.now(), text, done: false });
    els.input.value = '';
    persist();
    render();
  }

  function onListClick(e) {
    const item = e.target.closest('[data-id]');
    if (!item) return;
    const id = Number(item.dataset.id);
    if (e.target.matches('input[type="checkbox"]')) {
      const t = tasks.find(t => t.id === id); if (t) t.done = e.target.checked; persist(); updateCount();
      item.querySelector('.task-text').classList.toggle('line-through', e.target.checked);
      item.querySelector('.task-text').classList.toggle('text-fog-400', e.target.checked);
    }
    if (e.target.matches('.btn-del, .btn-del *')) {
      tasks = tasks.filter(t => t.id !== id); persist(); render();
    }
  }

  function render() {
    els.list.innerHTML = '';
    if (!tasks.length) {
      els.list.innerHTML = `<div class="text-center text-fog-400 text-sm py-8">
        <i class="fas fa-clipboard-list text-2xl mb-2 block float-animation"></i>æš‚æ— å¾…åŠäº‹é¡¹
      </div>`;
      updateCount();
      return;
    }
    const frag = document.createDocumentFragment();
    tasks.forEach(t => {
      const div = document.createElement('div');
      div.dataset.id = t.id;
      div.className = 'flex items-center justify-between p-2 rounded hover:bg-fog-50';
      div.innerHTML = `
        <label class="flex items-center gap-2">
          <input type="checkbox" ${t.done ? 'checked' : ''} class="accent-fog-600">
          <span class="task-text ${t.done ? 'line-through text-fog-400' : ''}">${escapeHtml(t.text)}</span>
        </label>
        <button class="btn-del text-xs text-fog-400 hover:text-fog-700 px-2 py-1 rounded">
          <i class="fas fa-trash"></i>
        </button>
      `;
      frag.appendChild(div);
    });
    els.list.appendChild(frag);
    updateCount();
  }

  function updateCount() {
    els.count.textContent = `${tasks.length}é¡¹`;
  }

  function persist() { localStorage.setItem('argogo.tasks', JSON.stringify(tasks)); }
  function load() { try { return JSON.parse(localStorage.getItem('argogo.tasks')) || []; } catch { return []; } }
}

/* ---------------- å¿«é€Ÿç¬”è®° ---------------- */
function initQuickNote() {
  const ta = document.getElementById('quick-note');
  const status = document.getElementById('save-status');
  ta.value = localStorage.getItem('argogo.quicknote') || '';
  const save = debounce(() => {
    localStorage.setItem('argogo.quicknote', ta.value);
    status.textContent = 'å·²ä¿å­˜';
  }, 500);
  ta.addEventListener('input', () => { status.textContent = 'ä¿å­˜ä¸­â€¦'; save(); });
}

/* ---------------- ä¸“æ³¨è®¡æ—¶ ---------------- */
function initFocusTimer() {
  const mEl = document.getElementById('timer-minutes');
  const sEl = document.getElementById('timer-seconds');
  const startBtn = document.getElementById('start-timer');
  const pauseBtn = document.getElementById('pause-timer');
  const resetBtn = document.getElementById('reset-timer');

  let total = 45 * 60; // é»˜è®¤ 45 åˆ†é’Ÿ
  let remain = total;
  let timer = null;

  function tick() {
    if (remain <= 0) { clearInterval(timer); timer = null; return; }
    remain -= 1; render();
  }

  function render() {
    const m = Math.floor(remain / 60);
    const s = remain % 60;
    mEl.textContent = String(m).padStart(2, '0');
    sEl.textContent = String(s).padStart(2, '0');
  }

  startBtn.addEventListener('click', () => {
    if (timer) return; // é˜²é‡å¤
    timer = setInterval(tick, 1000);
  });
  pauseBtn.addEventListener('click', () => { if (timer) { clearInterval(timer); timer = null; } });
  resetBtn.addEventListener('click', () => { remain = total; render(); });

  render();
}

/* ---------------- è®¡ç®—å™¨ ---------------- */
function initCalculator() {
  const display = document.getElementById('calculator-display');
  const btns = document.querySelectorAll('.calc-btn');
  const clearBtn = document.getElementById('clear-calculator');
  const toggleBtn = document.getElementById('toggle-calculator');
  const content = document.getElementById('calculator-content');
  const icon = document.getElementById('calculator-icon');

  let expr = '';
  updateDisplay();

  btns.forEach(b => b.addEventListener('click', () => onKey(b.dataset.value)));
  clearBtn.addEventListener('click', () => { expr = ''; updateDisplay(); });
  toggleBtn.addEventListener('click', () => {
    const isHidden = content.style.maxHeight === '0px' || content.style.maxHeight === '0';
    if (isHidden) {
      content.style.maxHeight = content.scrollHeight + 'px';
      icon.style.transform = 'rotate(0deg)';
    } else {
      content.style.maxHeight = '0px';
      icon.style.transform = 'rotate(-90deg)';
    }
  });

  // åˆå§‹å±•å¼€é«˜åº¦
  requestAnimationFrame(() => { content.style.overflow = 'hidden'; content.style.maxHeight = content.scrollHeight + 'px'; });

  function onKey(v) {
    if (v === '=') return evaluate();
    // åˆæ³•å­—ç¬¦ï¼šæ•°å­—ã€å°æ•°ç‚¹ã€è¿ç®—ç¬¦
    if (/^[0-9.+\-*/]$/.test(v)) {
      // é˜²æ­¢è¿ç»­è¿ç®—ç¬¦
      if (/^[+\-*/.]$/.test(v) && /^[+\-*/.]$/.test(expr.slice(-1))) {
        expr = expr.slice(0, -1) + v; // è¦†ç›–ä¸Šä¸€ä¸ª
      } else {
        expr += v;
      }
      updateDisplay();
    }
  }

  function evaluate() {
    if (!expr) return;
    // ç™½åå•æ ¡éªŒ
    if (!/^[-+*/.\d\s]+$/.test(expr)) { display.value = 'é”™è¯¯'; return; }
    try {
      // eslint-disable-next-line no-new-func
      const result = Function(`return (${expr})`)();
      expr = String(Number.isFinite(result) ? result : '');
      updateDisplay();
    } catch (e) {
      display.value = 'é”™è¯¯';
    }
  }

  function updateDisplay() { display.value = expr || '0'; }
}

/* ---------------- è§†è§‰åŠ¨ç”» ---------------- */
function initAnimations() {
  // å¡ç‰‡è¿›åœº
  const cards = document.querySelectorAll('.frosted-card');
  cards.forEach((card, i) => { card.style.animationDelay = `${i * 0.06}s`; card.classList.add('slide-in'); });

  // è½»å¾® 3D è·Ÿéš
  document.addEventListener('mousemove', e => {
    cards.forEach(card => {
      const r = card.getBoundingClientRect();
      const x = e.clientX - r.left, y = e.clientY - r.top;
      if (x < 0 || y < 0 || x > r.width || y > r.height) { card.style.transform = ''; return; }
      const cx = r.width / 2, cy = r.height / 2;
      const rx = (y - cy) / 16, ry = (cx - x) / 16;
      card.style.transform = `perspective(1000px) rotateX(${rx}deg) rotateY(${ry}deg) translateY(-4px)`;
    });
  });
}

/* ---------------- å°å·¥å…· ---------------- */
function debounce(fn, wait) {
  let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(null, args), wait); };
}
function escapeHtml(s) { return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m])); }
